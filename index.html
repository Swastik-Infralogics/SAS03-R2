<!DOCTYPE html>
<html lang="en">
<head>
    <!-- [Previous head content remains unchanged] -->
    <style>
        /* [Previous styles remain unchanged] */

        /* Adjusted preview image styles */
        .preview-section img {
            max-width: 100%;
            max-height: 100%;
            width: auto;
            height: auto;
            border-radius: 10px;
            box-shadow: 0px 2px 10px rgba(0,0,0,0.7);
        }

        /* Optional: Adjust preview section width */
        .preview-section {
            width: 50%; /* Adjust as needed */
            /* [Other styles remain unchanged] */
        }
    </style>
</head>
<body>
    <!-- [Previous body content remains unchanged] -->

    <!-- JavaScript to Load Images from Google Drive API -->
    <script src="https://apis.google.com/js/api.js"></script>
    <script>
        function loadClient() {
            gapi.load("client:auth2", function() {
                gapi.auth2.init({client_id: "YOUR_CLIENT_ID"});  // Replace with your OAuth 2.0 Client ID
                gapi.client.setApiKey("YOUR_API_KEY");  // Replace with your API Key
                return gapi.client.load("https://content.googleapis.com/discovery/v1/apis/drive/v3/rest")
                    .then(function() { 
                        console.log("GAPI client loaded for API");
                        listImages();  // Call your image listing function here
                    },
                    function(err) { 
                        console.error("Error loading GAPI client for API", err);
                    });
            });
        }

        function listImages() {
            gapi.client.drive.files.list({
                'q': "'16krYsVMK38hKvUY1XjC8P3_c5ubauFCI' in parents and mimeType contains 'image/'",
                'pageSize': 100,  // Adjust the number of images loaded
                'fields': "nextPageToken, files(id, name, thumbnailLink)"
            }).then(function(response) {
                const files = response.result.files;
                let gallery = document.getElementById('gallery');
                if (files && files.length > 0) {
                    files.forEach((file) => {
                        const imgDiv = document.createElement('div');
                        imgDiv.classList.add('inner-container');
                        // Use the thumbnail for the gallery preview
                        imgDiv.style.backgroundImage = `url(${file.thumbnailLink})`;
                        // Construct a direct link to the full-resolution image
                        const imageUrl = `https://drive.google.com/uc?export=view&id=${file.id}`;
                        imgDiv.setAttribute('data-image', imageUrl);
                        imgDiv.title = file.name;
                        gallery.appendChild(imgDiv);
                        
                        imgDiv.addEventListener('click', function() {
                            const previewImage = document.getElementById('preview-image');
                            previewImage.src = imageUrl;
                            previewImage.alt = file.name;
                        });
                    });
                }
            });
        }

        // Initialize the API on document load
        document.addEventListener('DOMContentLoaded', function() {
            loadClient();
        });
    </script>
</body>
</html>
